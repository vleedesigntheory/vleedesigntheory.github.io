(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{241:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"前端日志采集方案浅析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端日志采集方案浅析"}},[t._v("#")]),t._v(" 前端日志采集方案浅析")]),t._v(" "),e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),e("p",[t._v("在前端部署过程中，通常会使用nginx作为部署服务器，而对于默认的nginx服务来说，其提供了对应的日志记录，可以用于记录服务器访问的相关日志，对于系统稳定性及健壮性监控来说，日志采集、分析等能够提供更加量化的指标性建设，本文旨在简述前端应用及打点服务过程中所需要使用的nginx采集方案。")]),t._v(" "),e("h2",{attrs:{id:"架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[t._v("#")]),t._v(" 架构")]),t._v(" "),e("h3",{attrs:{id:"打点日志采集"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打点日志采集"}},[t._v("#")]),t._v(" 打点日志采集")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://vleedesigntheory.github.io/tech/back/log20220718/log01.jpg",alt:"图片"}})]),t._v(" "),e("p",[t._v("对于前端应用来说，通常需要埋点及处理对应的数据服务")]),t._v(" "),e("h3",{attrs:{id:"应用日志采集"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用日志采集"}},[t._v("#")]),t._v(" 应用日志采集")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://vleedesigntheory.github.io/tech/back/log20220718/log02.jpg",alt:"图片"}})]),t._v(" "),e("p",[t._v("对于日常应用来说，通常需要对nginx服务器本身的稳定性进行收集处理")]),t._v(" "),e("h2",{attrs:{id:"实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实践"}},[t._v("#")]),t._v(" 实践")]),t._v(" "),e("h3",{attrs:{id:"nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),e("h4",{attrs:{id:"日志格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日志格式"}},[t._v("#")]),t._v(" 日志格式")]),t._v(" "),e("p",[t._v("设置日志格式 "),e("code",[t._v("log_format")]),t._v(" 为约定的日志内容，可以用于日志清洗及过滤等，对于nginx的日志格式可以参看"),e("a",{attrs:{href:"http://nginx.org/en/docs/http/ngx_http_log_module.html#log_format",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx log_format官方文档"),e("OutboundLink")],1)]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("字段")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("含义")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("$time_iso8601")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("服务器时间的ISO 8610格式")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("$remote_addr")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("客户端地址")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("$http_host")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("主机名")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("$status")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("HTTP响应代码")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("$request_time")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("处理客户端请求使用的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("$request_length")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("请求的长度")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("$body_bytes_sent")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("传输给客户端的字节数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("$request_uri")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("包含一些客户端请求参数的原始URI")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("$http_user_agent")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("客户端用户代理")])])])]),t._v(" "),e("h4",{attrs:{id:"日志路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日志路径"}},[t._v("#")]),t._v(" 日志路径")]),t._v(" "),e("p",[t._v("配置server的access_log，例如：")]),t._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /etc/nginx/nginx.conf")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("log_format")]),t._v(" aaa "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$time_iso8601 $remote_addr $http_host $status $request_time $request_length $body_bytes_sent $request_uri $http_user_agent'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("access_log")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("access"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log  aaa"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$time_iso")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8601")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2})"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$year")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$month")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$day")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$hour")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$minute")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("access_log")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("aaa"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$year")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$month")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$day")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$hour")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$minute")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log aaa"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gif "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("empty_gif")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h4",{attrs:{id:"日志清除"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日志清除"}},[t._v("#")]),t._v(" 日志清除")]),t._v(" "),e("p",[t._v("为防止nginx产生的日志占满磁盘，需要定期清除，可以设置清除的时间间隔为1天，例如：")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Filename: delete_nginx_logs.sh")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LOGS_PATH")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/log/nginx\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("KEEP_DAYS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PID_FILE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/run/nginx.pid\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("YESTERDAY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" -d "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yesterday"')]),t._v(" +%Y-%m-%d"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" -f "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$PID_FILE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+%Y-%m-%d %H:%M:%S"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" Deleting logs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${LOGS_PATH}")]),t._v("/access.log "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${LOGS_PATH}")]),t._v("/access."),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${YESTERDAY}")]),t._v(".log "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/dev/null "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${LOGS_PATH}")]),t._v("/access.json "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${LOGS_PATH}")]),t._v("/access."),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${YESTERDAY}")]),t._v(".json "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/dev/null "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${LOGS_PATH}")]),t._v("/error.log "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${LOGS_PATH}")]),t._v("/error."),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${YESTERDAY}")]),t._v(".log "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/dev/null "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v(" -USR1 "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" $PID_FILE"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+%Y-%m-%d %H:%M:%S"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" Logs have deleted.\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+%Y-%m-%d %H:%M:%S"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" Please "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" sure that nginx is running"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$LOGS_PATH")]),t._v(" -type f -mtime +"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$KEEP_DAYS")]),t._v(" -print0 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),t._v(" -0 "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -f\n")])])]),e("p",[t._v("也可以建立一个删除日志的脚本，用于记录删除脚本的日志")]),t._v(" "),e("h3",{attrs:{id:"filebeat"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#filebeat"}},[t._v("#")]),t._v(" Filebeat")]),t._v(" "),e("p",[t._v("filebeat是一个日志文件托运工具，在你的服务器上安装客户端后，filebeat会监控日志目录或者指定的日志文件，追踪读取这些文件（追踪文件的变化，不停的读），并且转发这些信息到elasticsearch或者logstarsh或者kafka等。")]),t._v(" "),e("p",[t._v("通过 "),e("code",[t._v("filebeat.yml")]),t._v(" 进行相关的配置，例如：")]),t._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("###################### Filebeat Configuration Example #########################")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This file is an example configuration file highlighting only the most common")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# options. The filebeat.reference.yml file from the same directory contains all the")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# supported options with more comments. You can use it as a reference.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# You can find the full configuration reference here:")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://www.elastic.co/guide/en/beats/filebeat/index.html")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For more available modules and options, please see the filebeat.reference.yml sample")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# configuration file.")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ============================== Filebeat inputs ===============================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("filebeat.inputs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Each - is an input. Most options can be set at the input level, so")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# you can use different inputs for various configurations.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Below are the input specific configurations.")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" log\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Change to true to enable this input configuration.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Paths that should be crawled and fetched. Glob based paths.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("paths")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /var/log/nginx/ferms/*.log\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- c:\\programdata\\elasticsearch\\logs\\*")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Exclude lines. A list of regular expressions to match. It drops the lines that are")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# matching any regular expression from the list.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#exclude_lines: ['^DBG']")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Include lines. A list of regular expressions to match. It exports the lines that are")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# matching any regular expression from the list.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#include_lines: ['^ERR', '^WARN']")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Exclude files. A list of regular expressions to match. Filebeat drops the files that")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# are matching any regular expression from the list. By default, no files are dropped.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#exclude_files: ['.gz$']")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Optional additional fields. These fields can be freely picked")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# to add additional information to the crawled log files for filtering")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#fields:")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  level: debug")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  review: 1")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### Multiline options")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Multiline can be used for log messages spanning multiple lines. This is common")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# for Java Stack Traces or C-Line Continuation")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The regexp Pattern that has to be matched. The example pattern matches all lines starting with [")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#multiline.pattern: ^\\[")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Defines if the pattern set under pattern should be negated or not. Default is false.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#multiline.negate: false")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Match can be set to "after" or "before". It is used to define if lines should be append to a pattern')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# that was (not) matched before or after or as long as a pattern is not matched based on negate.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Note: After is the equivalent to previous and before is the equivalent to to next in Logstash")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#multiline.match: after")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ============================== Filebeat modules ==============================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("filebeat.config.modules")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Glob pattern for configuration loading")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path.config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/modules.d/*.yml\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set to true to enable config reloading")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("reload.enabled")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Period on which files under path should be checked for changes")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#reload.period: 10s")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ======================= Elasticsearch template setting =======================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("setup.template.settings")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("index.number_of_shards")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#index.codec: best_compression")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#_source.enabled: false")]),t._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ================================== General ===================================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The name of the shipper that publishes the network data. It can be used to group")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# all the transactions sent by a single shipper in the web interface.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#name:")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The tags of the shipper are included in their own field with each")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# transaction published.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#tags: ["service-X", "web-tier"]')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Optional fields that you can specify to add additional information to the")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# output.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#fields:")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  env: staging")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ================================= Dashboards =================================")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# These settings control loading the sample dashboards to the Kibana index. Loading")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the dashboards is disabled by default and can be enabled either by setting the")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# options here or by using the `setup` command.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#setup.dashboards.enabled: false")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The URL from where to download the dashboards archive. By default this URL")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# has a value which is computed based on the Beat name and version. For released")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# versions, this URL points to the dashboard archive on the artifacts.elastic.co")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# website.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#setup.dashboards.url:")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# =================================== Kibana ===================================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Starting with Beats version 6.0.0, the dashboards are loaded via the Kibana API.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This requires a Kibana endpoint configuration.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("setup.kibana")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Kibana Host")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Scheme and port can be left out and will be set to the default (http and 5601)")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# In case you specify and additional path, the scheme is required: http://localhost:5601/path")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# IPv6 addresses should always be defined as: https://[2001:db8::1]:5601")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#host: "localhost:5601"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Kibana Space ID")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ID of the Kibana Space into which the dashboards should be loaded. By default,")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the Default Space will be used.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#space.id:")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# =============================== Elastic Cloud ================================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# These settings simplify using Filebeat with the Elastic Cloud (https://cloud.elastic.co/).")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The cloud.id setting overwrites the `output.elasticsearch.hosts` and")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `setup.kibana.host` options.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# You can find the `cloud.id` in the Elastic Cloud web UI.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#cloud.id:")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The cloud.auth setting overwrites the `output.elasticsearch.username` and")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `output.elasticsearch.password` settings. The format is `<user>:<pass>`.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#cloud.auth:")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ================================== Outputs ===================================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Configure what output to use when sending the data collected by the beat.")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("output.kafka")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hosts")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx.xxx.xxx.xxx:9092"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyy.yyy.yyy.yyy:9092"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zzz.zzz.zzz.zzz:9092"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fee"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------- Elasticsearch Output ----------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#output.elasticsearch:")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Array of hosts to connect to.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#hosts: ["localhost:9200"]')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Protocol - either `http` (default) or `https`.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#protocol: "https"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Authentication credentials - either API key or username/password.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#api_key: "id:api_key"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#username: "elastic"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#password: "changeme"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ------------------------------ Logstash Output -------------------------------")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#output.logstash:")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The Logstash hosts")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#hosts: ["localhost:5044"]')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Optional SSL. By default is off.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# List of root certificates for HTTPS server verifications")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#ssl.certificate_authorities: ["/etc/pki/root/ca.pem"]')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Certificate for SSL client authentication")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#ssl.certificate: "/etc/pki/client/cert.pem"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Client Certificate Key")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#ssl.key: "/etc/pki/client/cert.key"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ================================= Processors =================================")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("processors")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("drop_fields")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fields")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@timestamp"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@metadata"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"log"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecs"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"host"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"agent"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ================================== Logging ===================================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Sets log level. The default log level is info.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Available log levels are: error, warning, info, debug")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# logging.level: debug")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# At debug level, you can selectively enable logging only for some components.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# To enable all selectors use ["*"]. Examples of other selectors are "beat",')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "publish", "service".')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#logging.selectors: ["*"]')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ============================= X-Pack Monitoring ==============================")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Filebeat can export internal metrics to a central Elasticsearch monitoring")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cluster.  This requires xpack monitoring to be enabled in Elasticsearch.  The")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# reporting is disabled by default.")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set to true to enable the monitoring reporter.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#monitoring.enabled: false")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Sets the UUID of the Elasticsearch cluster under which monitoring data for this")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Filebeat instance will appear in the Stack Monitoring UI. If output.elasticsearch")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# is enabled, the UUID is derived from the Elasticsearch cluster referenced by output.elasticsearch.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#monitoring.cluster_uuid:")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Uncomment to send the metrics to Elasticsearch. Most settings from the")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Elasticsearch output are accepted here as well.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Note that the settings should point to your Elasticsearch *monitoring* cluster.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Any setting that is not set is automatically inherited from the Elasticsearch")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# output configuration, so if you have the Elasticsearch output configured such")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# that it is pointing to your Elasticsearch monitoring cluster, you can simply")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# uncomment the following line.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#monitoring.elasticsearch:")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ============================== Instrumentation ===============================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Instrumentation support for the filebeat.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#instrumentation:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set to true to enable instrumentation of filebeat.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#enabled: false")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Environment in which filebeat is running on (eg: staging, production, etc.)")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#environment: ""')]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# APM Server hosts to report instrumentation results to.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#hosts:")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  - http://localhost:8200")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# API Key for the APM Server(s).")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# If api_key is set then secret_token will be ignored.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#api_key:")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Secret token for the APM Server(s).")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#secret_token:")]),t._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ================================= Migration ==================================")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This allows to enable 6.7 migration aliases")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#migration.6_to_7.enabled: true")]),t._v("\n")])])]),e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),e("p",[t._v("日志系统作为大型系统的重要组成部分，在前端侧的应用过程中通常不如后端体系那么庞大和重视，但其重要的数据支撑作用在前端系统中也是不可或缺的，对于日志的过滤清洗及分析也可以在前端体系中做一些对应生态建设。")]),t._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1895982",target:"_blank",rel:"noopener noreferrer"}},[t._v("三种姿势轻松采集 Nginx 日志"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/34943332",target:"_blank",rel:"noopener noreferrer"}},[t._v("8分钟带你深入浅出搞懂Nginx"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/qq_41868309/article/details/115517374",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker部署Nginx并使用filebeat收集运行日志"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_37537645/article/details/119204364",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker容器启动filebeat采集nginx模版(module)数据"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/JReno/article/details/92798383",target:"_blank",rel:"noopener noreferrer"}},[t._v("分布式ELK平台之Kibana和Logstash"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.jianshu.com/p/861091c71bcd",target:"_blank",rel:"noopener noreferrer"}},[t._v("Filebeat"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);